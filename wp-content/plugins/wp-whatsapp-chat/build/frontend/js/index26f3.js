/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={445:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},500:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,o(n)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)a.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},539:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},635:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,a=0;n<e.length;n++,a+=8)t[a>>>5]|=e[n]<<24-a%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],a=0;a<e.length;a+=3)for(var r=e[a]<<16|e[a+1]<<8|e[a+2],o=0;o<4;o++)8*a+6*o<=8*e.length?n.push(t.charAt(r>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],a=0,r=0;a<e.length;r=++a%4)0!=r&&n.push((t.indexOf(e.charAt(a-1))&Math.pow(2,-2*r+8)-1)<<2*r|t.indexOf(e.charAt(a))>>>6-2*r);return n}},e.exports=n},892:(e,t,n)=>{var a,r,o,s,l;a=n(635),r=n(539).utf8,o=n(445),s=n(539).bin,(l=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):r.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=a.bytesToWords(e),c=8*e.length,i=1732584193,p=-271733879,u=-1732584194,m=271733878,d=0;d<n.length;d++)n[d]=16711935&(n[d]<<8|n[d]>>>24)|4278255360&(n[d]<<24|n[d]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var f=l._ff,w=l._gg,_=l._hh,h=l._ii;for(d=0;d<n.length;d+=16){var v=i,y=p,g=u,b=m;i=f(i,p,u,m,n[d+0],7,-680876936),m=f(m,i,p,u,n[d+1],12,-389564586),u=f(u,m,i,p,n[d+2],17,606105819),p=f(p,u,m,i,n[d+3],22,-1044525330),i=f(i,p,u,m,n[d+4],7,-176418897),m=f(m,i,p,u,n[d+5],12,1200080426),u=f(u,m,i,p,n[d+6],17,-1473231341),p=f(p,u,m,i,n[d+7],22,-45705983),i=f(i,p,u,m,n[d+8],7,1770035416),m=f(m,i,p,u,n[d+9],12,-1958414417),u=f(u,m,i,p,n[d+10],17,-42063),p=f(p,u,m,i,n[d+11],22,-1990404162),i=f(i,p,u,m,n[d+12],7,1804603682),m=f(m,i,p,u,n[d+13],12,-40341101),u=f(u,m,i,p,n[d+14],17,-1502002290),i=w(i,p=f(p,u,m,i,n[d+15],22,1236535329),u,m,n[d+1],5,-165796510),m=w(m,i,p,u,n[d+6],9,-1069501632),u=w(u,m,i,p,n[d+11],14,643717713),p=w(p,u,m,i,n[d+0],20,-373897302),i=w(i,p,u,m,n[d+5],5,-701558691),m=w(m,i,p,u,n[d+10],9,38016083),u=w(u,m,i,p,n[d+15],14,-660478335),p=w(p,u,m,i,n[d+4],20,-405537848),i=w(i,p,u,m,n[d+9],5,568446438),m=w(m,i,p,u,n[d+14],9,-1019803690),u=w(u,m,i,p,n[d+3],14,-187363961),p=w(p,u,m,i,n[d+8],20,1163531501),i=w(i,p,u,m,n[d+13],5,-1444681467),m=w(m,i,p,u,n[d+2],9,-51403784),u=w(u,m,i,p,n[d+7],14,1735328473),i=_(i,p=w(p,u,m,i,n[d+12],20,-1926607734),u,m,n[d+5],4,-378558),m=_(m,i,p,u,n[d+8],11,-2022574463),u=_(u,m,i,p,n[d+11],16,1839030562),p=_(p,u,m,i,n[d+14],23,-35309556),i=_(i,p,u,m,n[d+1],4,-1530992060),m=_(m,i,p,u,n[d+4],11,1272893353),u=_(u,m,i,p,n[d+7],16,-155497632),p=_(p,u,m,i,n[d+10],23,-1094730640),i=_(i,p,u,m,n[d+13],4,681279174),m=_(m,i,p,u,n[d+0],11,-358537222),u=_(u,m,i,p,n[d+3],16,-722521979),p=_(p,u,m,i,n[d+6],23,76029189),i=_(i,p,u,m,n[d+9],4,-640364487),m=_(m,i,p,u,n[d+12],11,-421815835),u=_(u,m,i,p,n[d+15],16,530742520),i=h(i,p=_(p,u,m,i,n[d+2],23,-995338651),u,m,n[d+0],6,-198630844),m=h(m,i,p,u,n[d+7],10,1126891415),u=h(u,m,i,p,n[d+14],15,-1416354905),p=h(p,u,m,i,n[d+5],21,-57434055),i=h(i,p,u,m,n[d+12],6,1700485571),m=h(m,i,p,u,n[d+3],10,-1894986606),u=h(u,m,i,p,n[d+10],15,-1051523),p=h(p,u,m,i,n[d+1],21,-2054922799),i=h(i,p,u,m,n[d+8],6,1873313359),m=h(m,i,p,u,n[d+15],10,-30611744),u=h(u,m,i,p,n[d+6],15,-1560198380),p=h(p,u,m,i,n[d+13],21,1309151649),i=h(i,p,u,m,n[d+4],6,-145523070),m=h(m,i,p,u,n[d+11],10,-1120210379),u=h(u,m,i,p,n[d+2],15,718787259),p=h(p,u,m,i,n[d+9],21,-343485551),i=i+v>>>0,p=p+y>>>0,u=u+g>>>0,m=m+b>>>0}return a.endian([i,p,u,m])})._ff=function(e,t,n,a,r,o,s){var l=e+(t&n|~t&a)+(r>>>0)+s;return(l<<o|l>>>32-o)+t},l._gg=function(e,t,n,a,r,o,s){var l=e+(t&a|n&~a)+(r>>>0)+s;return(l<<o|l>>>32-o)+t},l._hh=function(e,t,n,a,r,o,s){var l=e+(t^n^a)+(r>>>0)+s;return(l<<o|l>>>32-o)+t},l._ii=function(e,t,n,a,r,o,s){var l=e+(n^(t|~a))+(r>>>0)+s;return(l<<o|l>>>32-o)+t},l._blocksize=16,l._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=a.wordsToBytes(l(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):a.bytesToHex(n)}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element;var t=n(500),a=n.n(t),r=n(892),o=n.n(r);const s={contactId:null,contactsConversation:{}};function l(e,t){const n={};return new Set([...Object.keys(e),...Object.keys(t)]).forEach(a=>{Object.prototype.hasOwnProperty.call(e,a)&&Object.prototype.hasOwnProperty.call(t,a)?!function(e){const t=typeof e;return null!=e&&("object"==t||"function"==t)}(e[a])||Array.isArray(e[a])?n[a]=t[a]:n[a]=l(e[a],t[a]):Object.prototype.hasOwnProperty.call(e,a)?n[a]=e[a]:Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}),n}const c=(0,e.createContext)(),i=(e,t)=>{const{contacts:n,contactId:a,storeName:r}=t.payload;switch(t.type){case"PERSIST_STATE":return((e,t,n=30)=>{let a=localStorage.getItem(e);if(a)a=JSON.parse(a),a.value=t;else{const e=new Date;a={value:t,expiration:new Date(e.getTime()+24*n*60*60*1e3).getTime()}}localStorage.setItem(e,JSON.stringify(a))})(r,e),e;case"HYDRATE_STATE":const t=(e=>{const t=localStorage.getItem(e);if(t){const n=JSON.parse(t);return(new Date).getTime()>n.expiration?(localStorage.removeItem(e),null):n.value}return null})(r);return t?(n[t.contactId]||(t.contactId=null),{...t}):e;case"SET_CONTACT_ID":if(null===a)return{...e,contactId:null};const o=n[a]?.message;return e.contactsConversation[a]?{...e,contactId:a}:l(e,{contactId:a,contactsConversation:{[a]:{messageListArray:""!==o?[{id:"",source:"user",text:o,status:""}]:[],threadOpenaiId:""}}})}return e},p=()=>(0,e.useContext)(c),u=t=>{const{contacts:n,children:a}=t,[r,l]=(0,e.useReducer)(i,s),p="persist:qlwapp:"+o()(JSON.stringify(n));return(0,e.useEffect)(()=>{l({type:"HYDRATE_STATE",payload:{contacts:n,storeName:p}})},[]),(0,e.useEffect)(()=>{l({type:"PERSIST_STATE",payload:{contacts:n,storeName:p}})},[r]),(0,e.createElement)(c.Provider,{value:{...r,...t,setContactId:e=>{l({type:"SET_CONTACT_ID",payload:{contacts:n,contactId:e,storeName:p}})}}},a)},m=window.wp.i18n,d=()=>(0,e.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},(0,e.createElement)("path",{d:"M20.563 22.104l-1.875 1.875-8-8 8-8 1.875 1.875-6.125 6.125z"})),f=({contact:t})=>{const{box:n}=p();return(0,e.createElement)("div",{className:"qlwapp__avatar"},(0,e.createElement)("div",{className:"qlwapp__avatar__container"},t?.avatar&&(0,e.createElement)("img",{src:t.avatar,alt:t.firstname,loading:"yes"===n.lazy_load&&"lazy"})))},w=({onClose:t,onPrevious:n})=>{const{contactId:a,box:r,contacts:o}=p(),s=o[a];return(0,e.createElement)("div",{className:"qlwapp__header"},(0,e.createElement)("i",{className:"qlwapp__close",onClick:t},"×"),(0,e.createElement)("div",{className:"qlwapp__carousel"},(0,e.createElement)("div",{className:"qlwapp__carousel-slide"},r.header&&(0,e.createElement)("div",{className:"qlwapp__header-description",dangerouslySetInnerHTML:{__html:r.header}})),(0,e.createElement)("div",{className:"qlwapp__carousel-slide"},(0,e.createElement)("div",{className:"qlwapp__header-contact"},(0,e.createElement)("a",{className:"qlwapp__previous",onClick:n},(0,e.createElement)(d,null)),(0,e.createElement)("div",{className:"qlwapp__info"},(0,e.createElement)("span",{className:"qlwapp__name"},s?.firstname," ",s?.lastname),(0,e.createElement)("span",{className:"qlwapp__time"},s?.timefrom!==s?.timeto&&(0,m.sprintf)((0,m._x)("Available from %1$s to %2$s","wp-whatsapp-chat"),s?.timefrom,s?.timeto),s?.label&&` - ${s?.label}`)),(0,e.createElement)(f,{contact:s})))))},_=()=>(0,e.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},(0,e.createElement)("path",{d:"M2.776 31.54c-1.954 1.036-3.144 0.122-2.658-2.038l2.066-9.17c0.246-1.086 1.318-2.068 2.432-2.2l12.39-1.44c3.296-0.38 3.308-0.996 0-1.374l-12.39-1.416c-1.1-0.126-2.18-1.080-2.424-2.17l-2.080-9.264c-0.486-2.146 0.704-3.046 2.662-2.006l25.7 13.658c1.956 1.038 1.96 2.72 0 3.76l-25.7 13.66z"}));function h(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}const v=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=window.matchMedia("(pointer:coarse)");return t&&t.matches||e};function y(e){const t=(({type:e,group:t,phone:n,message:a})=>{const r=v()?"https://api.whatsapp.com/send":"https://web.whatsapp.com/send";if("group"===e){const e=(e=>{try{const t=new URL(e);if("chat.whatsapp.com"===t.hostname)return t.pathname.replace("/","");if("web.whatsapp.com"===t.hostname&&"/accept"===t.pathname)return t.searchParams.get("code")}catch(e){console.error("Invalid URL",e)}return null})(t);return v()?`https://chat.whatsapp.com/${e}`:`https://web.whatsapp.com/accept?code=${e}`}return`${r}?phone=${function(e){return(e=e.replace(/[^0-9]/g,"")).replace(/^0+/,"")}(n?.toString())}&text=${encodeURIComponent(h(a))}`})(e),n=new CustomEvent("qlwapp.click",{bubbles:!0,cancelable:!0});window.dispatchEvent(n),window.open(t,"_blank","noreferrer")}const g=()=>{const{box:t,contactId:n,contacts:r}=p(),o=r[n],[s,l]=(0,e.useState)(""),c=(0,e.useRef)(),i=!s.trim(),u=e=>{e.preventDefault(),y({...o,message:s})};return(0,e.createElement)(e.Fragment,null,t.footer&&(0,e.createElement)("div",{className:"qlwapp__footer",dangerouslySetInnerHTML:{__html:t.footer}}),(0,e.createElement)("div",{className:"qlwapp__response"},(0,e.createElement)("pre",null,s),(0,e.createElement)("textarea",{ref:c,maxLength:"300",onChange:e=>{e.preventDefault(),l(e.target.value),((e=!1)=>{const t=c.current;t&&(t.style.height="",e||""!==!s||(t.style.height=`${t.scrollHeight}px`))})()},onKeyDown:e=>{e.shiftKey&&"Enter"===e.key||"Enter"!==e.key||i||u(e)},value:s,placeholder:t?.response,"aria-label":t?.response,tabIndex:"0"}),(0,e.createElement)("div",{className:"qlwapp__response__buttons"},(0,e.createElement)("i",{className:"qlwapp__reply--disabled qlwf-emoji",role:"button",tabIndex:"0",title:(0,m.__)("Add emoji","wp-whatsapp-chat")}),(0,e.createElement)("a",{className:a()("qlwapp__reply"),role:"button",tabIndex:"0",onClick:u,title:(0,m.__)("Send","wp-whatsapp-chat"),target:"blank"},(0,e.createElement)(_,null)))))};function b(e,t){return parseInt(e+t)}function E(e){let t=""+e.getMinutes();return 1===t.length&&(t="0"+t),e.getHours()+":"+t}const T=({timezone:e,timefrom:t,timeto:n,timedays:a})=>{const r=(({timedays:e})=>{const t=(new Date).getDay().toString();return e?.includes(t)||0===e?.length})({timedays:a}),o=function(e){let t=0;if(e.includes("UTC")){const n=e.replace(/UTC\+?/,"");isNaN(n)||(t=60*parseInt(n))}else try{const n=(new Date).toLocaleString("en-US",{timeZone:e});t=(new Date(n+" UTC")-new Date)/6e4}catch(e){return 0}return t}(e),s=new Date,l=new Date,c=new Date;let i=l.getTime(),p=s.getTime();if(t!==n){const e=-c.getTimezoneOffset()-(o||0);let a,u;a=b(t[0],t[1]),u=b(t[3],t[4]),l.setHours(a),l.setMinutes(u+e),i=l.getTime(),a=b(n[0],n[1]),u=b(n[3],n[4]),s.setHours(a),s.setMinutes(u+e),p=s.getTime(),i>p&&(i-=864e5);const m=i<=c.getTime()&&c.getTime()<=p;return{isAvailableNow:r&&m,isInAvailableDay:r,isInAvailableHour:m,timefrom:E(l),timeto:E(s)}}return{isAvailableNow:r,isInAvailableDay:r,isInAvailableHour:!0}};function x(e,t){return!!e.includes(parseInt(t))||!!e.includes(t.toString())}function q({timedays:e,timezone:t}){const n=function(e){try{let t=new Date;const n={weekday:"long"},a=function(e){const t=e.match(/^UTC([+-]\d{1,2})$/);return t?60*parseInt(t[1],10)*60*1e3:null}(e);if(null!==a){const e=new Date(t.getTime()+6e4*t.getTimezoneOffset()+a);n.timeZone="UTC",t=e}else n.timeZone=e;return{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6}[new Intl.DateTimeFormat("en-US",n).formatToParts(t).find(e=>"weekday"===e.type).value]}catch(e){return null}}(t);if(null===n)return!1;const a=[(0,m.__)("Sunday","wp-whatsapp-chat"),(0,m.__)("Monday","wp-whatsapp-chat"),(0,m.__)("Tuesday","wp-whatsapp-chat"),(0,m.__)("Wednesday","wp-whatsapp-chat"),(0,m.__)("Thursday","wp-whatsapp-chat"),(0,m.__)("Friday","wp-whatsapp-chat"),(0,m.__)("Saturday","wp-whatsapp-chat")];for(let t=n;t<=6;t++)if(x(e,t))return a[t];for(let t=0;t<n;t++)if(x(e,t))return a[t];return!1}const N=({contact:t,onClick:n})=>{const{isAvailableNow:r,isInAvailableDay:o,isInAvailableHour:s,timefrom:l,timeto:c}=T(t);if(!r&&"hidden"===t.visibility)return;const i=q(t);return(0,e.createElement)("a",{className:a()("qlwapp__contact",!r&&"qlwapp__contact--disabled"),onClick:n,role:"button",tabIndex:"0",target:"_blank"},(0,e.createElement)(f,{contact:t}),(0,e.createElement)("div",{className:"qlwapp__info"},(0,e.createElement)("span",{className:"qlwapp__label"},t?.label),(0,e.createElement)("span",{className:"qlwapp__name"},t?.firstname," ",t?.lastname),o?!s&&(0,e.createElement)("span",{className:"qlwapp__time"},(0,m.sprintf)((0,m._x)("Available from %1$s to %2$s","wp-whatsapp-chat"),l,c)):i&&(0,e.createElement)("span",{className:"qlwapp__time"},(0,m.sprintf)((0,m._x)("Available on %s","wp-whatsapp-chat"),i))))},S=({onClick:t})=>{const[,n]=(0,e.useTransition)(),{box:a,contacts:r,setContactId:o}=p(),s=e=>a=>{if(a.preventDefault(),!e.chat)return void y(e);t("qlwapp__modal--opening");const s=r.findIndex(t=>t.id===e.id);n(()=>{o(s)})},l=()=>{const e=document.querySelector(".qlwapp__header")?.offsetHeight,t=a.footer?document.querySelector(".qlwapp__footer")?.offsetHeight:document.querySelector(".qlwapp__response")?.offsetHeight;let n=window.innerHeight-e-t;v()&&(n=.7*window.innerHeight-e-t),document.documentElement.style.setProperty("--qlwapp-scheme-box-height",`${n}px`)};return(0,e.useEffect)(()=>(window.addEventListener("resize",l()),window.addEventListener("load",l()),()=>{window.removeEventListener("resize",l()),window.removeEventListener("load",l())}),[]),(0,e.createElement)("div",{className:"qlwapp__contact-list"},r.length?r.map(t=>(0,e.createElement)(N,{key:t.id,contact:t,onClick:s(t)})):(0,e.createElement)("div",{className:"qlwapp__contact-list__empty"},(0,m.__)("No contacts found.","wp-whatsapp-chat")))};function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},I.apply(null,arguments)}const C=()=>(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 9 24 6"},(0,e.createElement)("circle",{cx:18,cy:12,r:0,fill:"currentColor"},(0,e.createElement)("animate",{attributeName:"r",begin:.67,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"})),(0,e.createElement)("circle",{cx:12,cy:12,r:0,fill:"currentColor"},(0,e.createElement)("animate",{attributeName:"r",begin:.33,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"})),(0,e.createElement)("circle",{cx:6,cy:12,r:0,fill:"currentColor"},(0,e.createElement)("animate",{attributeName:"r",begin:0,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"}))),A=({text:t,status:n,source:r})=>(0,e.createElement)("div",{className:a()("qlwapp__message",r&&`qlwapp__message--${r}`,n&&`qlwapp__message--${n}`)},"waiting"===n?(0,e.createElement)("span",{className:"qlwapp__message--spinner"},(0,e.createElement)(C,null)):h(t)),O=()=>{const t=(0,e.useRef)(null),{contactId:n,contactsConversation:a}=p(),{messageListArray:r}=a[n];return(0,e.useEffect)(()=>{t.current&&r.length>0&&setTimeout(()=>{t.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[700])},[r]),(0,e.createElement)("div",{className:"qlwapp__message-list"},r.map(t=>(0,e.createElement)(A,I({key:t.id},t))),(0,e.createElement)("span",{ref:t}))},k=({handleBoxClose:t})=>{const{contactId:n,setContactId:r}=p(),[o,s]=(0,e.useState)(""),l=null!==n;return(0,e.createElement)("div",{className:a()("qlwapp__modal",l&&"qlwapp__modal--response",o)},(0,e.createElement)(w,{onClose:t,onPrevious:e=>{e.preventDefault(),s("qlwapp__modal--closing"),setTimeout(()=>{r(null),s("")},[300])}}),(0,e.createElement)("div",{className:"qlwapp__body"},(0,e.createElement)("div",{className:"qlwapp__carousel"},(0,e.createElement)("div",{className:"qlwapp__carousel-slide"},(0,e.createElement)(S,{onClick:s})),(0,e.createElement)("div",{className:"qlwapp__carousel-slide"},null!==n&&(0,e.createElement)(O,null)))),(0,e.createElement)(g,null))},D=t=>(0,e.createElement)(k,t),B=function({onClick:t}){const{button:n,box:r}=p(),{isAvailableNow:o,isInAvailableDay:s,isInAvailableHour:l,timefrom:c,timeto:i}=T(n);if(!o&&"hidden"===n.visibility)return;const u=q(n);return(0,e.createElement)("a",{className:a()("qlwapp__button",`qlwapp__button--${n.layout}`,!o&&"qlwapp__button--disabled"),role:"button",tabIndex:"0",onClick:e=>(e=>{e.preventDefault(),"yes"===n.box?t(e):(e=>{e.preventDefault(),y(n)})(e)})(e)},(0,e.createElement)("i",{className:a()("qlwapp__icon",n.icon)}),"bubble"===n.layout&&(0,e.createElement)("i",{className:"qlwapp__close"},"×"),n.text&&(0,e.createElement)("span",{className:"qlwapp__text"},n.text),s?!l&&(0,e.createElement)("span",{className:"qlwapp__time"},(0,m.sprintf)((0,m._x)("Available from %1$s to %2$s","wp-whatsapp-chat"),c,i)):u&&(0,e.createElement)("span",{className:"qlwapp__time"},(0,m.sprintf)((0,m._x)("Available on %s","wp-whatsapp-chat"),u)))},M=({children:t,containerRef:n,boxTransitionClass:r,isOpen:o})=>{const{button:s}=p(),l="yes"===s.rounded;return(0,e.createElement)("div",{ref:n,className:a()("qlwapp__container",`qlwapp__container--${s.position}`,l&&"qlwapp__container--rounded",r)},t)},H=(0,e.memo)(t=>{const{box:n,button:a}=t,r=(0,e.useRef)(null),[o,s]=(0,e.useState)(!1),[l,c]=(0,e.useState)(""),i="qlwapp_box_closed",p="yes"===n.auto_open&&"yes"===a.box,m="true"===function(e){const t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}(i),d=Number(n.auto_delay_open);(0,e.useEffect)(()=>{p&&!m&&setTimeout(()=>{s(!0)},d)},[]);const f=e=>{e?.preventDefault(),c("qlwapp__container--closing"),function(e){let t="";{const e=new Date;e.setTime(e.getTime()+6048e5),t="; expires="+e.toUTCString()}document.cookie=e+"=true"+t+"; path=/"}(i),setTimeout(()=>{s(!1),c("")},300)};return(0,e.createElement)(u,t,(0,e.createElement)(M,{boxTransitionClass:l,containerRef:r,isOpen:o},o&&(0,e.createElement)(D,{handleBoxClose:f}),(0,e.createElement)(B,{onClick:()=>{o?f():(s(!0),c("qlwapp__container--opening"),setTimeout(()=>{c("qlwapp__container--open")},300))}})))}),j=e=>!("hide"===e||"desktop"===e&&v()||"mobile"===e&&!v());document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".qlwapp").forEach(t=>{var n,a,r,o;const s=null!==(n=JSON.parse(t.getAttribute("data-display")))&&void 0!==n?n:{},l=null!==(a=JSON.parse(t.getAttribute("data-button")))&&void 0!==a?a:{},c=null!==(r=JSON.parse(t.getAttribute("data-box")))&&void 0!==r?r:{},i=(e=>e?(Array.isArray(e)||(e=Object.values(e)),e.reduce((e,t,n)=>(j(t?.display?.devices)&&(e[n]=t),e),[])):[])(null!==(o=JSON.parse(t.getAttribute("data-contacts")))&&void 0!==o?o:{});j(s?.devices)&&(void 0!==e.createRoot?(0,e.createRoot)(t).render((0,e.createElement)(H,{display:s,button:l,box:c,contacts:i})):(0,e.render)((0,e.createElement)(H,{display:s,button:l,box:c,contacts:i}),t))})})})()})();